{"ast":null,"code":"import { io } from 'socket.io-client';\nimport { resetAll, resetGivenAnswer } from './reducers/quiz';\nlet ws;\n\nconst connect = lobby => ws.emit('TEAM_CONNECT', {\n  lobby\n});\n\nconst socket = (dispatch, state, history) => {\n  if (ws === undefined) {\n    ws = io('ws://localhost:3000', {\n      reconnectionDelayMax: 10000,\n      withCredentials: true\n    });\n  }\n\n  ws.off('message').on('message', ({\n    type,\n    payload\n  }) => {\n    switch (type) {\n      case 'TEAM_REMOVED':\n        if (payload.teamId === state.quiz.teamName) {\n          ws.emit('TEAM_DISCONNECT', {\n            lobby: state.quiz.lobbyId\n          });\n          dispatch(resetAll());\n          history.push('/');\n        }\n\n        break;\n\n      case 'NEW_QUESTION':\n        history.push('/question');\n        break;\n\n      case 'QUESTION_CLOSED':\n        dispatch(resetGivenAnswer());\n        history.push('/question/closed');\n        break;\n\n      case 'LOBBY_ENDED':\n        history.push('/');\n        break;\n\n      case 'ROUND_FINISHED':\n        history.push('/round-finished');\n        break;\n\n      default:\n        console.log('Socket.io message:', type, payload);\n    }\n  });\n};\n\nexport { connect, socket };","map":{"version":3,"sources":["/home/niels/Projects/school/quizzer/client/team/src/socket.js"],"names":["io","resetAll","resetGivenAnswer","ws","connect","lobby","emit","socket","dispatch","state","history","undefined","reconnectionDelayMax","withCredentials","off","on","type","payload","teamId","quiz","teamName","lobbyId","push","console","log"],"mappings":"AAAA,SAASA,EAAT,QAAmB,kBAAnB;AACA,SAASC,QAAT,EAAmBC,gBAAnB,QAA2C,iBAA3C;AAEA,IAAIC,EAAJ;;AAEA,MAAMC,OAAO,GAAGC,KAAK,IAAIF,EAAE,CAACG,IAAH,CAAQ,cAAR,EAAwB;AAAED,EAAAA;AAAF,CAAxB,CAAzB;;AAEA,MAAME,MAAM,GAAG,CAACC,QAAD,EAAWC,KAAX,EAAkBC,OAAlB,KAA8B;AAC3C,MAAIP,EAAE,KAAKQ,SAAX,EAAsB;AACpBR,IAAAA,EAAE,GAAGH,EAAE,CAAC,qBAAD,EAAwB;AAAEY,MAAAA,oBAAoB,EAAE,KAAxB;AAA+BC,MAAAA,eAAe,EAAE;AAAhD,KAAxB,CAAP;AACD;;AAEDV,EAAAA,EAAE,CAACW,GAAH,CAAO,SAAP,EAAkBC,EAAlB,CAAqB,SAArB,EAAgC,CAAC;AAAEC,IAAAA,IAAF;AAAQC,IAAAA;AAAR,GAAD,KAAuB;AACrD,YAAQD,IAAR;AACE,WAAK,cAAL;AACE,YAAIC,OAAO,CAACC,MAAR,KAAmBT,KAAK,CAACU,IAAN,CAAWC,QAAlC,EAA4C;AAC1CjB,UAAAA,EAAE,CAACG,IAAH,CAAQ,iBAAR,EAA2B;AAAED,YAAAA,KAAK,EAAEI,KAAK,CAACU,IAAN,CAAWE;AAApB,WAA3B;AACAb,UAAAA,QAAQ,CAACP,QAAQ,EAAT,CAAR;AACAS,UAAAA,OAAO,CAACY,IAAR,CAAa,GAAb;AACD;;AACD;;AACF,WAAK,cAAL;AACEZ,QAAAA,OAAO,CAACY,IAAR,CAAa,WAAb;AACA;;AACF,WAAK,iBAAL;AACEd,QAAAA,QAAQ,CAACN,gBAAgB,EAAjB,CAAR;AACAQ,QAAAA,OAAO,CAACY,IAAR,CAAa,kBAAb;AACA;;AACF,WAAK,aAAL;AACEZ,QAAAA,OAAO,CAACY,IAAR,CAAa,GAAb;AACA;;AACF,WAAK,gBAAL;AACEZ,QAAAA,OAAO,CAACY,IAAR,CAAa,iBAAb;AACA;;AACF;AACEC,QAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkCR,IAAlC,EAAwCC,OAAxC;AAtBJ;AAwBD,GAzBD;AA0BD,CA/BD;;AAiCA,SAASb,OAAT,EAAkBG,MAAlB","sourcesContent":["import { io } from 'socket.io-client';\nimport { resetAll, resetGivenAnswer } from './reducers/quiz';\n\nlet ws;\n\nconst connect = lobby => ws.emit('TEAM_CONNECT', { lobby });\n\nconst socket = (dispatch, state, history) => {\n  if (ws === undefined) {\n    ws = io('ws://localhost:3000', { reconnectionDelayMax: 10000, withCredentials: true });\n  }\n\n  ws.off('message').on('message', ({ type, payload }) => {\n    switch (type) {\n      case 'TEAM_REMOVED':\n        if (payload.teamId === state.quiz.teamName) {\n          ws.emit('TEAM_DISCONNECT', { lobby: state.quiz.lobbyId });\n          dispatch(resetAll());\n          history.push('/');\n        }\n        break;\n      case 'NEW_QUESTION':\n        history.push('/question');\n        break;\n      case 'QUESTION_CLOSED':\n        dispatch(resetGivenAnswer());\n        history.push('/question/closed');\n        break;\n      case 'LOBBY_ENDED':\n        history.push('/');\n        break;\n      case 'ROUND_FINISHED':\n        history.push('/round-finished');\n        break;\n      default:\n        console.log('Socket.io message:', type, payload);\n    }\n  });\n};\n\nexport { connect, socket };"]},"metadata":{},"sourceType":"module"}